<html >
<head>
<title>Tracula - Trac without the suck</title>

<!-- <link rel="stylesheet" href="css/basic.css" />
<link rel="stylesheet" href="css/dropzone.css" /> -->

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<!-- Bootstrap -->
<link href="static/bootstrap/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="static/css/font-awesome.min.css" rel="stylesheet" media="screen">

<link href="static/css/bootflat.css" rel="stylesheet" media="screen">

<link href="static/css/bootflat-extensions.css" rel="stylesheet" media="screen">
<link href="static/css/bootflat-square.css" rel="stylesheet" media="screen">

</head>

<style>
  [contenteditable=true] {
    border: 1px solid white;
  }
  [contenteditable=true]:hover {
    border: 1px dotted gray;
  }
</style>

<body >
<script type="text/x-handlebars">

<nav class="navbar navbar-default" role="navigation">
  <form name="search" action="/search" class="form-inline" role="form" id="search_form" {{action "searchFormSubmit" on="submit"}}>
  <div class="form-group">
    <label class="sr-only" for="ticket_search">Search trac</label>
    {{input type="search" value=searchQuery placeholder="Search trac" class="form-control input-lg"}}
  </div>
    <button type="submit" class="btn btn-success"> Search</button>
    <button id="create-ticket" class="btn primary" {{action "openCreateTicketAction"}}>Create</button>
  </form>


</nav>

<div class="container">
{{outlet}}
</div>

<footer class="container pull-right" >
<small>Cobbled together with Ember.js & Clojure</small>
</footer>
</script>

<script type="text/x-handlebars" data-template-name="ticket/view">
  {{#if ticket}}
    <div class="row">
      <div class="col-md-8">
        <div class="page-header">
          <h1> {{view Ember.ContenteditableView id="summary" contenteditable="true" valueBinding="ticket.summary" action="titleDidChange"}} <small>{{ticket.id}}</small></h1>
          <small>Created: {{created}}</small>
        </div>
      </div>
    </div>

    {{#with ticket}}
      <div class="row">
        <div class="col-md-1">Type: {{type}}</div>
        <div class="col-md-1">Priority: {{priority}}</div>
        <div class="col-md-1">Status: {{status}}</div>
        <div class="col-md-1">Owner: {{owner}}</div>
        <div class="col-md-1">Reported by: {{reporter}}</div>
        <div class="col-md-1">Component: {{component}}</div>
      </div>
    {{/with}}

    <hr>
    <div class="row">
      <label for="description">Description</label>
      <div class="col-md-12" id="description" contenteditable=true>

      {{{description}}}

      </div>
    </div>
  {{else}}
    <div class="row">
      <div class="col-md-8">
        <div class="page-header">
          <h1> {{error.heading}} <small>{{error.detail}}</small></h1>
        </div>
      </div>
    </div>
  {{/if}}

</script>


<script type="text/x-handlebars" data-template-name="ticket/create">
<h1>Create Ticket</h1>
<form method="create_ticket" id="create_ticket_form" {{action createTicket on="submit"}}>
  <div class="form-group">
    <label for="summary">Title/Summary</label>
    {{input value=summary name="summary" class="form-control"  id="summary"}}
  </div>
  <div class="form-group">
    <label for="description">Description</label>
    {{textarea value=description name="description" rows="3" class="form-control"}}
  </div>
    <button type="submit" class="btn btn-primary">Save</button>
  </div>
</form>
</script>

<!-- JS libs -->
<script src="static/bower_components/jquery/jquery.min.js"></script>
<script src="static/bower_components/handlebars/handlebars.js"></script>
<!-- <script src="static/bower_components/backbone/backbone-min.js"></script> -->

<script src="static/bower_components/ember/ember.js"></script>
<script src="static/js/views/ember.contenteditable.view.js"></script>
<script src="static/bower_components/underscore/underscore-min.js"></script>
<script src="static/js/utils.js"></script>
<script src="static/js/tracula-app.js"></script>
<script src="static/js/models/ticket.js"></script>
<script src="static/js/controllers/app.controller.js"></script>
<script src="static/js/routes/ticket-view.route.js"></script>
<script src="static/js/controllers/ticket-view.controller.js"></script>
<script src="static/js/controllers/ticket-create.controller.js"></script>
<script src="static/js/bootstrap.min.js"></script>
</body>
</html>
